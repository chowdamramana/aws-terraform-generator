<div id="step2">
    <h2 class="text-xl font-semibold mb-4">Step 2: Add Resources</h2>
    <form hx-post="/config/step2" hx-target="#wizard" hx-swap="innerHTML">
        <input type="hidden" name="config_name" value="{{ config_name }}">
        <input type="hidden" name="region" value="{{ region }}">
        <div id="resources" class="space-y-4">
            <div class="resource-form bg-gray-50 dark:bg-gray-700 p-4 rounded">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Resource Type</label>
                <select name="resource_types" class="resource-type border p-2 w-full rounded dark:bg-gray-600 dark:text-white"
                        hx-post="/config/properties"
                        hx-target="#properties-0"
                        hx-trigger="change"
                        hx-swap="innerHTML">
                    <option value="">Select a resource</option>
                    {% for rt in resource_types %}
                    <option value="{{ rt }}">{{ rt }}</option>
                    {% endfor %}
                </select>
                <div id="properties-0" class="mt-2"></div>
            </div>
        </div>
        <button type="button" onclick="addResourceForm()" class="bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded mt-2">Add Resource</button>
        <div class="mt-4 flex space-x-4">
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Next</button>
            <button type="button" hx-get="/config" hx-target="#wizard" class="bg-gray-300 dark:bg-gray-500 text-gray-800 dark:text-white px-4 py-2 rounded">Back</button>
        </div>
    </form>
</div>
<script>
function addResourceForm() {
    const resourcesDiv = document.getElementById('resources');
    const count = resourcesDiv.children.length;
    const form = document.createElement('div');
    form.className = 'resource-form bg-gray-50 dark:bg-gray-700 p-4 rounded';
    form.innerHTML = `
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Resource Type</label>
        <select name="resource_types" class="resource-type border p-2 w-full rounded dark:bg-gray-600 dark:text-white"
                hx-post="/config/properties"
                hx-target="#properties-${count}"
                hx-trigger="change"
                hx-swap="innerHTML">
            <option value="">Select a resource</option>
            {% for rt in resource_types %}
            <option value="{{ rt }}">{{ rt }}</option>
            {% endfor %}
        </select>
        <div id="properties-${count}" class="mt-2"></div>
    `;
    resourcesDiv.appendChild(form);
}
</script>